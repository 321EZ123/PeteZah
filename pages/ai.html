<html lang="en"><head>

  <script async src="https://www.googletagmanager.com/gtag/js?id=G-SHE360M0YP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SHE360M0YP');
</script>
  
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <title>PeteAI</title>
    <link rel="icon" type="image/x-icon" href="/storage/assets/logo-png-removebg-preview.png"> 
    <style>
        

body {
    font-family: Arial, sans-serif;
    background-color: #0d0d0d;
    margin: 0;
    height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
}

.proxy-header {
    display: flex;
    align-items: center;
    background-color: #141414;
    padding: 5px 10px;
    color: white;
    height: 30px; 
}

.proxy-header .buttons {
    display: flex;
    margin-right: auto;
}

.proxy-header button {
    background-color: #1A1A1A;
    border: none;
    padding: 8px 12px;
    margin: 0 5px;
    cursor: pointer;
    color: white;
    font-size: 14px; 
    border-radius: 8px;
    transition: 0.3s ease-in-out;
}

.proxy-header button:hover {
    background-color: #555;
}

iframe {
    flex-grow: 1;
    width: 100%;
    height: calc(100vh - 40px);
    border: none;
}

.chatbot-container {
    margin-top: 90px;
    width: 50vw;
    height: 70vh;
    max-width: 100%;
    background-color: #141414;
    border-radius: 10px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

.chat-header {
    background-color: #141414;
    color: #fff;
    text-align: center;
    font-size: 22px;
    font-weight: bold;
    margin: 0;
}

.chat-content {
    height: 400px;
    padding: 20px;
    overflow-y: auto;
    background-color: #141414;
}

.chat-content p {
    margin: 15px 0;
    font-size: 16px;
    word-wrap: break-word;
    white-space: normal; 
}


.chat-content .user-message {
    text-align: right;
    font-weight: bold;
    color: #e1e1e1;
}

.chat-content .ai-message {
    text-align: left;
    font-style: italic;
    color: #9e9e9e;
    white-space: normal; 
    word-wrap: break-word; 
    width: auto;
}

.input-container {
    display: flex;
    padding: 15px;
    background-color: #141414;
}

.input-container input {
    width: 100%;
    padding: 12px;
    border-radius: 25px;
    border: none;
    font-size: 16px;
    background-color: #1a1a1a;
    color: white;
}

.input-container button {
    background-color: #1a1a1a;
    color: white;
    border: none;
    padding: 12px 20px;
    border-radius: 25px;
    cursor: pointer;
    font-size: 16px;
    margin-left: 10px;
    transition: background-color 0.3s ease;
}

.input-container button:hover {
    background-color: #555;
}

#typing-indicator {
    font-style: italic;
    color: #aaa;
}

#iframe {
    margin-top: 50px;
    width: 100vw; 
    height: 50vh; 
    border: none;
}

    </style>
</head>
<body>
    <div class="container" id="imageContainer" style="margin-left: 25%; animation: fade-in-top 1s;">
      <div class="chatbot-container">
        <div class="chat-header">
            <br><h3>PeteAI 0.1</h3>
        </div>
        <div class="chat-content" id="chat-container"></div>
        <div class="input-container">
            <input type="text" id="user-input" placeholder="Ask PeteAI anything that is on your mind...">
            <button id="send-button">Send</button>
        </div>
    </div>
    </div>
    <script>
        
const chatContainer = document.getElementById('chat-container');
const userInput = document.getElementById('user-input');
const sendButton = document.getElementById('send-button');

const apiKey = 'Z3NrX0h1N0ZPbGZYMmpleERkNE5IZFAzV0dkeWIzRlkwSWZWekdZNlkwMmFrbUxLSUFxRk51Z1Y';
let messageHistory = [
    { role: "system", content: "You are the helpful PeteAI assistant.  You are called PeteAI.  Thank Pete Zah Games for making you!  Pete Zah is the ceo of Pete Zah Games."}
];

let sessionMemory = {
    userName: '', 
    favoriteColor: '', 
    lastResult: null,
    facts: {},
    userQuestions: []
};

function addMessage(role, message) {
    chatContainer.innerHTML += `<p><strong>${role}:</strong> ${message}</p>`;
    chatContainer.scrollTop = chatContainer.scrollHeight;
}

function showTypingIndicator() {
    const typingIndicator = document.createElement('p');
    typingIndicator.id = 'typing-indicator';
    typingIndicator.innerHTML = '<strong>AI:</strong> Typing...';
    chatContainer.appendChild(typingIndicator);
}

function removeTypingIndicator() {
    const typingIndicator = document.getElementById('typing-indicator');
    if (typingIndicator) typingIndicator.remove();
}

function updateSessionMemory(key, value) {
    sessionMemory[key] = value;
}

async function sendMessage() {
    const userMessage = userInput.value.trim();
    if (userMessage === '') return;

    addMessage("You", userMessage);
    userInput.value = '';
    messageHistory.push({ role: "user", content: userMessage });

    showTypingIndicator();

    try {
        let responseMessage = '';

        if (/^\d+\s*[\+\-\*\/]\s*\d+$/.test(userMessage)) {
            const result = eval(userMessage);
            responseMessage = `The result of ${userMessage} is ${result}.`;
            updateSessionMemory('lastResult', result);
        } else if (userMessage.toLowerCase().includes('add')) {
            const lastResult = sessionMemory.lastResult || 0;
            const addValue = parseFloat(userMessage.match(/\d+/)[0]);
            const newResult = lastResult + addValue;
            responseMessage = `Adding ${addValue} to ${lastResult} gives ${newResult}.`;
            updateSessionMemory('lastResult', newResult);
        } else if (userMessage.toLowerCase().includes('my name is')) {
            const name = userMessage.split('is')[1].trim();
            sessionMemory.userName = name;
            responseMessage = `Nice to meet you, ${name}!`;
            updateSessionMemory('userName', name);
        } else if (userMessage.toLowerCase().includes('remember that')) {
            const fact = userMessage.split('remember that')[1].trim();
            sessionMemory.facts[fact] = true;
            responseMessage = `Got it! I'll remember that: "${fact}".`;
        } else if (userMessage.toLowerCase().includes('what do you remember')) {
            const facts = Object.keys(sessionMemory.facts);
            responseMessage = facts.length > 0 ? `I remember these things: ${facts.join(', ')}.` : "I don't remember anything yet.";
        } else {
            const response = await fetch('https://api.groq.com/openai/v1/chat/completions', {
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${apiKey}`,
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    model: "mixtral-8x7b-32768",
                    messages: [
                        { role: "system", content: "You are a helpful AI assistant." },
                        ...messageHistory
                    ],
                    temperature: 0.9,
                    max_tokens: 1024,
                    stream: false
                })
            });

            if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);

            const data = await response.json();
            responseMessage = data.choices[0].message.content;
        }

        removeTypingIndicator();
        addMessage("AI", responseMessage);
        messageHistory.push({ role: "assistant", content: responseMessage });
    } catch (error) {
        removeTypingIndicator();
        addMessage("Error", `Failed to get AI response. Error details: ${error.message}`);
    }
}

sendButton.addEventListener('click', sendMessage);
userInput.addEventListener('keypress', (e) => {
    if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        sendMessage();
    }
});

    </script>


</body></html>
